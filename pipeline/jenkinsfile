pipeline {
    agent any
    stages {
        stage('Test') {
            steps {
                script { 
                    sh """
                    pwd
                    python3 -m pip config set global.break-system-packages true
                    pip3 install robotframework robotframework-requests
                    python3 -m robot -d reportes tests/test.robot
                    python3 -m robot -x output-junit.xml reportes/output.xml
                    """
                }
            }
        }
    }
    post {
        always {
            junit 'output.xml'
            cleanWs()
        }
    }
}